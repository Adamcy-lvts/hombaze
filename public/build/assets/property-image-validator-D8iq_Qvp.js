async function D(h){return new Promise((u,s)=>{const g=new FileReader;g.onload=H=>{const e=new Image;e.onload=()=>{const a=e.naturalWidth,o=e.naturalHeight;if(a<1024||o<768){s("This photo is too small (low quality). Please select a clearer photo at least 1024x768px.");return}const i=4/3,M=a/o;let I=0,m=0,r=a,l=o;M>i?(r=o*i,I=(a-r)/2):(l=a/i,m=(o-l)/2);let t=r,n=l;t>2560&&(t=2560,n=2560/i),t=Math.round(t),n=Math.round(n);const c=document.createElement("canvas");c.width=t,c.height=n;const d=c.getContext("2d");d.imageSmoothingEnabled=!0,d.imageSmoothingQuality="high",d.drawImage(e,I,m,r,l,0,0,t,n),c.toBlob(T=>{if(!T){s("We couldn't process this image. Please try another one.");return}const W=new File([T],h.name.replace(/\.[^/.]+$/,"")+".jpg",{type:"image/jpeg",lastModified:Date.now()});u(W)},"image/jpeg",.8)},e.onerror=()=>s("This file doesn't look like a valid image."),e.src=H.target.result},g.onerror=()=>s("We couldn't read this file. Please try again."),g.readAsDataURL(h)})}export{D as v};
